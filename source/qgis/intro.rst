.. sectionauthor:: Артём Светлов <artem.svetlov@nextgis.ru>

.. _ngcourse_qgis_intro:

Введение
========

.. note::

   Этот раздел сейчас пишется. БОЛЬШИМИ БУКВАМИ отмечены заметки TODO
   
Настоящий курс предназначен для начинающих пользователей и охватывает различные
аспекты работы в NextGIS QGIS с начала

Обзор
================================

As information becomes increasingly spatially aware, there is no shortage of tools able to fulfill some or all commonly used GIS functions. Why should anyone be using QGIS over some other GIS software package?

Here are only some of the reasons:

    It’s free, as in lunch. Installing and using the QGIS program costs you a grand total of zero money. No initial fee, no recurring fee, nothing.
    It’s free, as in liberty. If you need extra functionality in QGIS, you can do more than just hope it will be included in the next release. You can sponsor the development of a feature, or add it yourself if you are familiar with programming.
    It’s constantly developing. Because anyone can add new features and improve on existing ones, QGIS never stagnates. The development of a new tool can happen as quickly as you need it to. ВОТ Я ЭТО НЕФТЯННИКАМ СКАЗАЛ, А ОНИ СРАЗУ - ЭТО НЕ ТРУ, ЗНАЧИТ ОНО НЕДОДЕЛАНО. НУ ВОТ ЧТО ТАКИМ ОТВЕТИТЬ?
    Extensive help and documentation is available. If you’re stuck with anything, you can turn to the extensive documentation, your fellow QGIS users, or even the developers.
    Cross-platform. QGIS can be installed on MacOS, Windows and Linux.

Now that you know why you want to use QGIS, we can show you how. The first lesson will guide you in creating your first QGIS map.
https://docs.qgis.org/2.14/en/docs/training_manual/introduction/intro.html cc-by-sa

мы делаем кугис
это российский софт
ВЗЯТЬ ТЕКСТ ИЗ МОЕЙ ПРЕЗЕНТАЦИИ

Начальные настройки qgis
------------------------------------------

1. Проверяем включение плагина quickmapservices, nextgis connect
2. Проверяем включение мультипоточной обрисовки

Quickstart
---------------------

1. Открываем сохранёный проект из выгрузок.

Слои
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Их можно включать-выключать, и переносить вверх-вниз. При работе в десктопной ГИС человек всё время их включает-выключает и перетаскивает, в этом и заключается работа.

In the Layers list, you can see a list, at any time, of all the layers available to you.

Expanding collapsed items (by clicking the arrow or plus symbol beside them) will provide you with more information on the layer’s current appearance.

Right-clicking on a layer will give you a menu with lots of extra options. You will be using some of them before long, so take a look around!

Карта
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Что про неё можно сказать? Ну это надо взять из документации какой-нибудь умной. Ещё тут надо проверить включено ли мультипоточный редеринг, хотя это не к месту, и вообще не понятно что тут писать.

панель состояния.
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

она будет рассмотрена ниже

Операции на файловом уровне
------------------------------------------

Геоданные бывают векторные и растровые. Векторные данные обычно хранятся как электронная 
таблица, где у каждой записи есть своя геометрия - то есть фигура, заданная координатами 
точек. Растровые данные обычно сохраняются как картинка, в которой указано, на какое 
место земного шара она ложится.

Существует множество форматов хранения геоданных и протоколов их передачи по сети. 
Они могут представлять собой файлы или находиться в базах данных. Преобразованием 
форматов занимаются утилиты :program:`GDAL` (растровые) и :program:`OGR` (векторные). 
Благодаря этим утилитам :program:`NextGIS QGIS` может читать и записывать разные 
форматы данных без сильных различий для пользователя. Разумеется, обычно используются 
только самые общеупотребительные форматы.

.. note::
   QGIS использует библиотеку OGR для чтения и записи векторных данных (работа с векторными
   данными GRASS и данными PostgreSQL реализована через отдельные модули поставщиков 
   данных), включая :term:`ESRI Shapefile` файлы, файлы MapInfo и Microstation, пространственные 
   базы :term:`PostGIS`, SpatiaLite, Oracle и многие другие. Кроме того, векторные данные могут 
   быть загруженны напрямую из архивов zip или gzip. С полным списком форматов векторных 
   данных можно ознакомиться по адресу: http://www.gdal.org/ogr/ogr_formats.html .

Понятие Слой будет часто встречаться в инструкции. Слой - это геоданные с определенным
составом и оформлением. Карта состоит из одного или нескольких слоев.

.. note:: Для открытия файлов векторных геоданных вам потребуется знать: место, где лежат файлы на диске, их кодировку.

Для добавления слоя выполните: ``Слой ‣ Добавить слой ‣ Добавить векторный слой`` или 
``Слой ‣ Добавить слой ‣ Добавить растровый слой`` соответственно.


Открываем шейп из файла.

GEOPACKAGE
^^^^^^^^^^^^^^^^^^^^

Сохраняем в gеоpackage, это формат по умолчанию

ESRI SHAPEFILE
^^^^^^^^^^^^^^^^^^^^^^

Сохраняем в шейп. Сохранять нужно в epsg:4326 и UTF-8
Показ содержимого шейпфайла на жестком диске в totalcommander

GeoJSON
^^^^^^^^^^^^^^^^^^^^^^^

Сохраняем в gеоjson
Открываем GeoJSON.

Энтерпрайзные форматы
^^^^^^^^^^^^^^^^^^^^^^^^^

Связь с MapInfo, Arc*, Oracle, CAD-системами


Панель состояния
================================

    Открываем подложку из qms
    Рассказ про qms
    Показ кнопок в строке состояния снизу
    
1. В окне показываются координаты в той системе координат, что пишется в углу. Практического смысла от них особо нет, применяются только в одном случае - посмотреть в чём измеряются координаты в текущей системе координат - градусах, метрах, или пикселах.
2. Масштаб. Можно вводить с клавиатуры, можно выбирать из списка. Список координат можно редактировать в настройках. Так же можно точно подгонять масштаб с клавишей Ctrl
3. Кнопка замок - меняет алгоритм масштабирования. У людей как - когда меняешь масштаб, размеры букв остаются те же. А теперь когда меняешь масштаб, буквы тоже будут мелкими. Другими словами - меняется разрешение. Там где от масштаба зависит отрисовка - оно остаётся таким же, а меняется охват.
4. Поворот карты. Слои поворачиваются, а подписи остаются горизонтальными. Потом ту же операцию можно сделать в при создании компоновки карты.
5. Галочка Render - если слоёв много, то когда всё тормозит, её можно выключить, поотключать все лишние слои, и включить обратно.
6. Кнопка в углу показывает систему координат, в которую преобразовывается всё на экране. Если преобразование координат включено, то пишется OTF. Как правило слои бывают в разных СК, и преобразование координат включено, что бы на экране всё рисовалось красиво.
7. Включаем перепроецирование в 4326 - всё сплющенное, в 32637 - всё нормально, но растры изогнутые. Включаем 3857 и живём с этим дальше.


Делаем учебный проект
===========================

Учебные материалы: подготовленные данные - 5 векторных слоёв типа выгрузки из osm, без оформления

1. Найти на диске учебные данные
2. Добавьте их в QGIS
3. Сохраните их в свой рабочий каталог в подходящем формате
4. Настройте порядок отображения слоёв
5. Сохраните проект с осмысленным именем файла

Таблица атрибутов
================================

1. Открываем таблицу атрибутов какого-нибудь слоя выгрузок.
2. Установки - параметры - Источники данных - Таблица атрибутов - Открывать таблицу во встроенном окне

У векторных слоёв имеются атрибуты, которые описывают свойства объектов слоя. Их используют для настройки отображения данных. Атрибуты векторных объектов хранятся в таблице.

1. Сортируем
2. Выделяем

Что делать если кракозябры 
-----------------------------

УБРАТЬ KRAKOWIAK

Фильтр для слоя.
-----------------------------

Оператор =
^^^^^^^^^^^^^^^^^^^^

ВЗЯТЬ ИЗ ИНСТРУКЦИИ

Оператор IN
^^^^^^^^^^^^^^^^^^^^

ВЗЯТЬ ИЗ ИНСТРУКЦИИ

Оператор wildcard 
^^^^^^^^^^^^^^^^^^^^

ВЗЯТЬ ИЗ ИНСТРУКЦИИ

Фильтрование идёт быстро, на уровне провайдера, если он это поддерживает. При сохранении слоя, остаются эти же фичи.

    Фильтры внизу таблицы. Они медленнее
    Показывать только видимые
    Фильтры, которые в таблице атрибутов

   
 


    Так же можно легко открывать растровые слои
Открываем космоснимок из проекта заповедники
Подробнее расбота с растровыми слоями будет расспотрена в последний день
    Подкладываем мапник qms. Сам плагин уже установлен автоматом. Рассказываем процесс подключения модулей. Процесс обновления стилей в qgis.
    
Импорт из Excel.
================================

    Открываем Excel, придумываем таблицу с широтой в градусах.
    Пишем формулу перевода из градусов в DMS. Пример формата: 46°01’24,7”;11°13’47,5”


Импорт из postgis
================================

Открываем базу с гис-лаба где лежат выгрузки, её адрес написан в статье на гис-лабе где разграфки лежат.
это надо перенести





Оцифровка
================================

    Создаём шейпфайл с атрибутами.
    Рисуем полигоны
    Рисуем дырки
    Рисуем мультиобъекты
    Рисуем "водные объекты" - озера и болота по топокарте
    Создаём временный слой, добавляем поля, потом сохраняем
    Топологическое редактирование.
    Дополнительные инструменты оцифровки. Разбивка мультиобъектов работает только модулем
    3-я панель про оцифровку - там можно рисовать прямоугольники.

Операции с проекциями.
================================

это перенести выше
    Рассказать про 4 проекции: 4326, 3857, UTM, GK (или потом ниже?)


Идентификация.
================================

    Окна остаются на фоне, поэтому красные выделения остаются.
    Смотрим данные клиента.
    
Правка данных в таблице.
================================

    Добавление-удаление полей работает в шейпе.
    Копируем объекты в временный слой
    Добавляем атрибуты и правим их.

Калькулятор полей.
================================

    Рассчитываем поле автоматом.

Связь слоёв по атрибутам
================================

Связь точек замеров и данных замеров из Excel.

Расчёт расстояний и площадей
================================

    Проверяем настройку использования эллипсоида (кнопка та где перепроецирование менять)
    Считаем линейкой.
    Считаем в окне идентификации
    Добавляем геометрию модулем.
    Считаем через dissolve


Оформление векторных слоёв
================================

    Берём слой городов из осм
    Смотрим точечные объекты
    Берём слой воды
    Смотрим заливки
    Берём слой "водные объекты"
    Уникальные значения
    Берём слой дорог из OSM
    Правила
    
Уровни знака
---------------------
    
    берём слой "общественное питание в Москве"
    градуированый
    кластеры
    теплокарта        
        

Подписи
================================

    Ручное перемещение и поворот подписей.
    
Векторные операции    
================================    

    Обзор меню векторных операций
    Проходим по всем модулям
    Пример - генерация сетки 
    
Модуль Geoprocessing
---------------------

Модели
---------------------


Использование данных из навигаторов Garmin. Получение и отправка данных.
================================

собственно тут всё говорится одной фразой, так исторически сложилось что это было на главном уровне, надо переместить к разделу OSM

Создание компоновки
================================

Создание диаграм
================================

Использование векторных данных Openstreetmap
================================

wiki.osm.org
---------------------

QUICK OSM
---------------------

overpass-api
---------------------

gis-lab выгрузки
---------------------

openstreetmapdata
---------------------

OSM Info
---------------------

Выкачать чего-нибудь и неможко оформить

Тайлы в QMS
---------------------

тайлы в qms, будет мутность если выбрал не тот масштаб, можно включиить мультипоточный реднеринг
